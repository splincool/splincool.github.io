(function(e){function t(t){for(var n,r,o=t[0],c=t[1],l=t[2],m=0,g=[];m<o.length;m++)r=o[m],s[r]&&g.push(s[r][0]),s[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);u&&u(t);while(g.length)g.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],n=!0,o=1;o<a.length;o++){var c=a[o];0!==s[c]&&(n=!1)}n&&(i.splice(t--,1),e=r(r.s=a[0]))}return e}var n={},s={app:0},i=[];function r(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=n,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(a,n,function(t){return e[t]}.bind(null,n));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/projects/gallery/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"418f":function(e,t,a){"use strict";var n=a("56b0"),s=a.n(n);s.a},"56b0":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("097d");var n=a("2b0e"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-container",{staticClass:"bv-example-row"},[a("b-row",{staticClass:"mb-3"},[a("b-col",[a("SearchBar")],1)],1),a("b-row",{staticClass:"mb-3"},[a("b-col",{staticClass:"text-center"},[a("AddImageBlock")],1)],1),a("b-row",[a("b-col",[a("ImageList")],1)],1)],1)},i=[],r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-navbar",{attrs:{toggleable:"md",type:"dark",variant:"info"}},[a("b-navbar-toggle",{attrs:{target:"nav_collapse"}}),a("b-navbar-brand",{attrs:{href:"#"}},[e._v("Gallery")]),a("b-collapse",{attrs:{"is-nav":"",id:"nav_collapse"}},[a("b-navbar-nav",{staticClass:"ml-auto"},[a("b-nav-form",[e.showSearchCount?a("span",{staticClass:"mr-3 search-count"},[e._v("\n          Найдено: "+e._s(e.getImages.length)+"\n        ")]):e._e(),a("b-form-input",{staticClass:"mr-sm-2",attrs:{size:"sm",type:"text",placeholder:"Search"},on:{input:e.updateSearch}})],1)],1)],1)],1)},o=[],c=a("cebc"),l=a("2f62"),u={name:"SearchBar",data:function(){return{showSearchCount:!1}},watch:{"$store.state.searchField":function(e){e.length?this.showSearchCount=!0:this.showSearchCount=!1}},computed:Object(c["a"])({},Object(l["b"])(["getImages"])),methods:{updateSearch:function(e){this.$store.commit("setSearchField",e)}}},m=u,g=(a("418f"),a("2877")),p=Object(g["a"])(m,r,o,!1,null,null,null),d=p.exports,f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-row",{staticClass:"image-list",attrs:{"align-h":"center"}},e._l(e.getImages,function(e){return a("b-col",{key:e.id,attrs:{sm:"auto"}},[a("ImageBlock",{attrs:{_image:e}})],1)}),1)},h=[],b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"image-box text-center"},[n("img",{staticClass:"image-content",attrs:{src:e._image.dataUrl}}),e.editView?n("div",{staticClass:"title-wrapper"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.image.name,expression:"image.name"}],attrs:{type:"text"},domProps:{value:e.image.name},on:{input:function(t){t.target.composing||e.$set(e.image,"name",t.target.value)}}}),n("b-btn",{staticClass:"ok-btn",attrs:{size:"sm"},on:{click:e.saveName}},[e._v("\n      Ok\n    ")])],1):n("div",{staticClass:"title-wrapper text-center",on:{click:function(t){e.changeName(e._image.id)}}},[n("p",[e._v(e._s(e._image.name))]),n("img",{staticClass:"edit-btn",attrs:{src:a("f639")}})])])},v=[],w={name:"ImageBlock",props:{_image:Object},data:function(){return{editView:!1,image:null}},methods:{changeName:function(e){this.image=this.$store.getters.getImage(e),this.editView=!0},saveName:function(){this.editView=!1,this.$store.dispatch("changeImageData",{image:this.image})}}},_=w,I=(a("eb7e"),Object(g["a"])(_,b,v,!1,null,null,null)),C=I.exports,x={name:"ImageList",computed:Object(c["a"])({},Object(l["b"])(["getImages"])),components:{ImageBlock:C}},y=x,k=Object(g["a"])(y,f,h,!1,null,null,null),O=k.exports,S=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add-image-block"},[a("b-btn",{on:{click:function(t){e.show=!0}}},[e._v("Добавить")]),a("b-modal",{attrs:{id:"modal1",title:"Добавить изображение"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[a("b-container",{attrs:{fluid:""}},[a("b-row",{staticClass:"mb-2 text-center"},[a("b-col",[a("image-uploader",{key:e.uploaderKey,attrs:{preview:!0,className:["fileinput",{"fileinput--loaded":e.hasImage}],capture:"environment",debug:1,doNotResize:"gif",autoRotate:!0,outputFormat:"verbose"},on:{input:e.setImage}},[a("label",{staticClass:"fileinput-label",attrs:{slot:"upload-label",for:"fileInput"},slot:"upload-label"},[a("div",{staticClass:"upload-caption"},[e.hasImage?a("span",[e._v("Изменить изображение")]):a("span",[e._v("Добавить изображение")])])])])],1)],1),e.hasImage?a("b-row",{staticClass:"mb-2 text-center"},[a("b-col",[a("label",{attrs:{for:"imageName"}},[e._v("Название:")]),a("b-form-input",{attrs:{id:"imageName",type:"text",placeholder:"Имя изображения"},model:{value:e.image.name,callback:function(t){e.$set(e.image,"name",t)},expression:"image.name"}})],1)],1):e._e(),e.hasImage?a("b-row",{staticClass:"mb-1 text-center"},[a("b-col",[a("b-btn",{attrs:{variant:"success"},on:{click:e.saveImage}},[e._v("Сохранить")])],1)],1):e._e()],1),a("div",{staticClass:"w-100",attrs:{slot:"modal-footer"},slot:"modal-footer"},[a("b-btn",{staticClass:"float-right",attrs:{size:"sm",variant:"primary"},on:{click:function(t){e.show=!1}}},[e._v("\n        Закрыть\n      ")])],1)],1)],1)},j=[],$={name:"AddImageBlock",data:function(){return{uploaderKey:0,imageSrc:null,image:null,hasImage:!1,imageTitle:"",show:!1}},methods:{setImage:function(e){this.hasImage=!0,this.image=e,this.image.id=Math.floor(1e4*Math.random())},saveImage:function(){this.$store.commit("saveImage",this.image),this.uploaderKey=Math.random(),this.hasImage=!1,this.image=null,this.show=!1}}},N=$,B=(a("a4ea"),Object(g["a"])(N,S,j,!1,null,null,null)),M=B.exports,U={name:"App",components:{SearchBar:d,ImageList:O,AddImageBlock:M}},F=U,P=Object(g["a"])(F,s,i,!1,null,null,null),L=P.exports,E=a("8c4f");n["a"].use(E["a"]);var z=new E["a"]({routes:[]});a("7514"),a("7f7f"),a("6762"),a("2fdb");n["a"].use(l["a"]);var A=new l["a"].Store({state:{images:[{id:0,dataUrl:"https://picsum.photos/300/200?image=0",name:"Laptop"},{id:1,dataUrl:"https://picsum.photos/300/200?image=10",name:"Nature"},{id:2,dataUrl:"https://picsum.photos/300/200?image=22",name:"Man"},{id:3,dataUrl:"https://picsum.photos/300/200?image=15",name:"Stones"},{id:4,dataUrl:"https://picsum.photos/300/200?image=18",name:"Green"},{id:5,dataUrl:"https://picsum.photos/300/200?image=43",name:"City"},{id:6,dataUrl:"https://picsum.photos/300/200?image=54",name:"Clouds"}],searchField:""},mutations:{saveImage:function(e,t){e.images.unshift(t)},setSearchField:function(e,t){e.searchField=t},changeImageName:function(e,t){e.images[t.imageIndex]=t.image}},getters:{getImages:function(e){return e.images.filter(function(t){return t.name.toLowerCase().includes(e.searchField.toLowerCase())})},getImage:function(e){return function(t){return e.images.find(function(e){return e.id===t})}}},actions:{changeImageData:function(e,t){var a=e.commit,n=e.state,s=null;n.images.find(function(e,a){e.id===t.image.id&&(s=a)}),null!=s&&a("changeImageName",{imageIndex:s,image:t.image})}}}),T=a("9f7b"),V=(a("f9e3"),a("2dd8"),a("e3c4")),K=a.n(V);n["a"].use(T["a"]),n["a"].use(K.a),n["a"].config.productionTip=!1,new n["a"]({router:z,store:A,render:function(e){return e(L)}}).$mount("#app")},"81e7":function(e,t,a){},a4ea:function(e,t,a){"use strict";var n=a("81e7"),s=a.n(n);s.a},b402:function(e,t,a){},eb7e:function(e,t,a){"use strict";var n=a("b402"),s=a.n(n);s.a},f639:function(e,t,a){e.exports=a.p+"img/edit-btn.f93ae381.png"}});
//# sourceMappingURL=app.4cdf6ca3.js.map