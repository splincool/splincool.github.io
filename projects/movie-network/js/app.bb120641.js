(function(e){function t(t){for(var n,r,s=t[0],c=t[1],u=t[2],l=0,m=[];l<s.length;l++)r=s[l],a[r]&&m.push(a[r][0]),a[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);d&&d(t);while(m.length)m.shift()();return i.push.apply(i,u||[]),o()}function o(){for(var e,t=0;t<i.length;t++){for(var o=i[t],n=!0,r=1;r<o.length;r++){var s=o[r];0!==a[s]&&(n=!1)}n&&(i.splice(t--,1),e=c(c.s=o[0]))}return e}var n={},r={app:0},a={app:0},i=[];function s(e){return c.p+"js/"+({about:"about"}[e]||e)+"."+{about:"1b18e742"}[e]+".js"}function c(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,c),o.l=!0,o.exports}c.e=function(e){var t=[],o={about:1};r[e]?t.push(r[e]):0!==r[e]&&o[e]&&t.push(r[e]=new Promise(function(t,o){for(var n="css/"+({about:"about"}[e]||e)+"."+{about:"7be21601"}[e]+".css",r=c.p+n,a=document.getElementsByTagName("link"),i=0;i<a.length;i++){var s=a[i],u=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(u===n||u===r))return t()}var l=document.getElementsByTagName("style");for(i=0;i<l.length;i++){s=l[i],u=s.getAttribute("data-href");if(u===n||u===r)return t()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=t,m.onerror=function(t){var n=t&&t.target&&t.target.src||r,a=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");a.request=n,o(a)},m.href=r;var d=document.getElementsByTagName("head")[0];d.appendChild(m)}).then(function(){r[e]=0}));var n=a[e];if(0!==n)if(n)t.push(n[2]);else{var i=new Promise(function(t,o){n=a[e]=[t,o]});t.push(n[2]=i);var u,l=document.getElementsByTagName("head")[0],m=document.createElement("script");m.charset="utf-8",m.timeout=120,c.nc&&m.setAttribute("nonce",c.nc),m.src=s(e),u=function(t){m.onerror=m.onload=null,clearTimeout(d);var o=a[e];if(0!==o){if(o){var n=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src,i=new Error("Loading chunk "+e+" failed.\n("+n+": "+r+")");i.type=n,i.request=r,o[1](i)}a[e]=void 0}};var d=setTimeout(function(){u({type:"timeout",target:m})},12e4);m.onerror=m.onload=u,l.appendChild(m)}return Promise.all(t)},c.m=e,c.c=n,c.d=function(e,t,o){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(c.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(o,n,function(t){return e[t]}.bind(null,n));return o},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/projects/movie-network/",c.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var m=0;m<u.length;m++)t(u[m]);var d=l;i.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"154a":function(e,t,o){"use strict";var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("b-card",{staticClass:"mb-2",staticStyle:{"max-width":"20rem"},attrs:{title:e.movie.name,"img-src":e.movie.image.medium,"img-alt":e.movie.name,"img-top":"",tag:"article"}},[o("div",{attrs:{slot:"footer"},slot:"footer"},[o("small",{staticClass:"text-muted"},[e._v("Last updated "+e._s(e.dateConverter())+" ")])])])},r=[],a=(o("6b54"),o("87b3"),o("cadf"),o("551c"),o("097d"),{props:{movie:Object},methods:{dateConverter:function(){var e=new Date(1e3*this.movie.updated);return e.toString()}}}),i=a,s=o("2877"),c=Object(s["a"])(i,n,r,!1,null,null,null);c.options.__file="movieCard.vue";t["a"]=c.exports},"56d7":function(e,t,o){"use strict";o.r(t);o("cadf"),o("551c"),o("097d");var n=o("2b0e"),r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("b-container",{},[o("NavBar",{staticClass:"mb-4"}),o("router-view")],1)},a=[],i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("b-navbar",{attrs:{toggleable:"md",type:"light",variant:"primary"}},[o("b-navbar-toggle",{attrs:{target:"nav_collapse"}}),o("b-navbar-brand",[e._v("Movie")]),o("b-collapse",{attrs:{"is-nav":"",id:"nav_collapse"}},[o("b-navbar-nav",[o("b-nav-item",{attrs:{to:"/"}},[e._v("Home")]),o("b-nav-item",{attrs:{to:"/about"}},[e._v("About")])],1),o("b-navbar-nav",{staticClass:"ml-auto"},[o("b-nav-form",{on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchMovie(t):null}}},[o("b-form-input",{staticClass:"mr-sm-2",attrs:{size:"sm",type:"text",placeholder:"Search"},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}}),o("b-button",{staticClass:"my-2 my-sm-0",attrs:{size:"sm"},on:{click:e.searchMovie}},[e._v("\n            Search\n        ")])],1),e.user?o("b-nav-item-dropdown",{attrs:{right:""}},[e.user.name?o("template",{slot:"button-content"},[e._v("\n          "+e._s(e.user.name)+"\n        ")]):e._e(),e.user.name?e._e():o("template",{slot:"button-content"},[e._v("\n          User\n        ")]),o("b-dropdown-item",{attrs:{to:"/profile"}},[e._v("Profile")]),o("logout")],2):e._e(),e.user?e._e():o("b-navbar-nav",[o("b-nav-item",{attrs:{to:"/auth"}},[e._v("Login/register")])],1)],1)],1)],1)},s=[],c=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("b-dropdown-item",{on:{click:e.logout}},[e._v("logout")])},u=[],l={computed:{user:function(){return this.$store.getters.user}},methods:{logout:function(){this.$store.dispatch("logout"),this.$router.push("/")}}},m=l,d=o("2877"),v=Object(d["a"])(m,c,u,!1,null,null,null);v.options.__file="logout.vue";var f=v.exports,g={data:function(){return{searchValue:""}},components:{logout:f},computed:{user:function(){return this.$store.getters.user}},methods:{searchMovie:function(){this.searchValue&&(this.$store.commit("setSearchValue",this.searchValue),this.searchValue="",this.$router.push({name:"search"}))}}},p=g,h=Object(d["a"])(p,i,s,!1,null,null,null);h.options.__file="NavBar.vue";var b=h.exports,_={components:{NavBar:b}},y=_,w=(o("5c0b"),Object(d["a"])(y,r,a,!1,null,null,null));w.options.__file="App.vue";var M=w.exports,L=o("8c4f"),S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",{staticClass:"text-center"},[e.loading?n("img",{staticClass:"mt-6",attrs:{src:o("cf1c"),alt:"loading..."}}):e._e(),e.loading?e._e():n("b-container",{},[n("b-row",[n("b-col",[n("b-pagination",{attrs:{size:"md","total-rows":100,"per-page":10},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)],1),n("b-row",e._l(e.movies,function(t){return n("b-col",{key:t.id,attrs:{md:"3"}},[n("b-card",{staticClass:"mb-2 pointer",staticStyle:{"max-width":"20rem"},attrs:{title:t.name,"img-src":t.image.medium,"img-alt":t.name,"img-top":"",tag:"article"},on:{click:function(o){e.movieRouter(t.id)}}})],1)}))],1)],1)},E=[],U={name:"home",data:function(){return{currentPage:1}},created:function(){this.getMovies()},watch:{currentPage:function(){this.getMovies()}},computed:{movies:function(){return this.$store.getters.movies},loading:function(){return this.$store.state.loading}},methods:{getMovies:function(){this.$store.dispatch("getMovies","shows?page=".concat(this.currentPage-1))},movieRouter:function(e){this.$router.push("movie/"+e)}}},P=U,C=Object(d["a"])(P,S,E,!1,null,null,null);C.options.__file="Home.vue";var k=C.exports,x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",[n("b-container",{staticClass:"text-center"},[e.loading?n("img",{staticClass:"mt-6",attrs:{src:o("cf1c"),alt:"loading..."}}):e._e()]),e.show?n("b-container",{staticClass:"mb-4"},[e.loading?e._e():n("b-row",[n("b-col",{staticClass:"text-center",attrs:{cols:"12",sm:"4"}},[n("movieCard",{attrs:{movie:e.movie}}),e.user?n("div",[e.favShow?e._e():n("b-button",{attrs:{variant:"primary"},on:{click:e.addMyMovies}},[e._v("\n            Add to favorites\n          ")]),e.favShow?n("b-button",{attrs:{variant:"primary"},on:{click:e.deleteMyMovies}},[e._v("\n            Remove from favorites\n          ")]):e._e()],1):e._e()],1),n("b-col",{attrs:{cols:"12",sm:"8"}},[n("b-list-group",[n("b-list-group-item",[n("b",[e._v("Name:")]),e._v("\n            "+e._s(e.movie.name)+"\n          ")]),n("b-list-group-item",[n("b",[e._v("Language:")]),e._v("\n            "+e._s(e.movie.language)+"\n          ")]),n("b-list-group-item",[n("b",[e._v("Status:")]),e._v("\n            "+e._s(e.movie.status)+"\n          ")]),n("b-list-group-item",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapse1",modifiers:{collapse1:!0}}]},[n("b",[e._v("Genres:")]),n("b-badge",{staticClass:"ml-2",attrs:{variant:"primary",pill:""}},[e._v("\n              "+e._s(e.movie.genres.length)+"\n            ")]),n("b-collapse",{staticClass:"mt-2",attrs:{visible:"",id:"collapse1"}},e._l(e.movie.genres,function(t){return n("b-card",{key:t.id,attrs:{"bg-variant":"light"}},[n("p",{staticClass:"card-text"},[e._v(e._s(t))])])}))],1),n("b-list-group-item",[n("b",[e._v("Premiere date:")]),e._v("\n            "+e._s(e.movie.premiered)+"\n          ")]),n("b-list-group-item",[n("b",[e._v("Rating")]),n("b-badge",{staticClass:"ml-2",attrs:{variant:"primary",pill:""}},[e._v("\n              "+e._s(e.movie.rating.average)+"\n            ")]),n("b-progress",{staticClass:"mb-2 mt-2",attrs:{value:10*e.movie.rating.average,variant:"primary",striped:e.striped}})],1),n("b-list-group-item",[n("b-container",{staticClass:"text-center "},[n("b-btn",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapseMore",modifiers:{collapseMore:!0}}],staticClass:"text-center",attrs:{variant:"primary"}},[e._v("\n                More information\n              ")])],1),n("b-collapse",{staticClass:"mt-2",attrs:{id:"collapseMore"}},[n("moreInfo",{attrs:{movie:e.movie}})],1)],1)],1)],1)],1)],1):e._e()],1)},$=[],j=o("154a"),O=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("b-list-group",[o("b-list-group-item",[o("b",[e._v("Channel:")]),e._v("\n      "+e._s(e.movie.network.name)+"\n    ")]),o("b-list-group-item",[o("b",[e._v("Country:")]),e._v("\n      "+e._s(e.movie.network.country.name)+"\n    ")]),o("b-list-group-item",[o("b",[e._v("Summary:")]),o("p",{staticClass:"text-justify",domProps:{innerHTML:e._s(this.movie.summary)}})])],1)},N=[],R={props:{movie:Object},data:function(){return{id:this.$route.params.id}}},A=R,I=Object(d["a"])(A,O,N,!1,null,null,null);I.options.__file="moreInfoMovie.vue";var T=I.exports,V={data:function(){return{id:this.$route.params.id,striped:!0,show:!1,favShow:!1}},components:{movieCard:j["a"],moreInfo:T},created:function(){this.user&&this.getMyMovies(),this.getMovie()},computed:{movie:function(){return this.$store.state.movies},loading:function(){return this.$store.state.loading},user:function(){return this.$store.state.user},myMovies:function(){return this.$store.state.myMovies}},watch:{movie:function(e){e&&(this.show=!0)},myMovies:function(e){for(var t in this.myMovies){if(t===String(this.id)){this.favShow=!0;break}this.favShow=!1}},getMyMovies:function(){this.$store.dispatch("getMyMovies")}},methods:{getMovie:function(){this.$store.dispatch("getMovies","shows/".concat(this.id))},addMyMovies:function(){this.$store.dispatch("addMyMovies",this.movie),this.favShow=!0},deleteMyMovies:function(){this.$store.dispatch("deleteMyMovies",this.movie.id),this.favShow=!1},getMyMovies:function(){this.$store.dispatch("getMyMovies")}}},B=V,z=Object(d["a"])(B,x,$,!1,null,null,null);z.options.__file="Movie.vue";var F=z.exports;n["a"].use(L["a"]);var G=new L["a"]({routes:[{path:"/",name:"home",component:k},{path:"/profile",name:"profile",component:function(){return o.e("about").then(o.bind(null,"b3b1"))}},{path:"/auth",name:"auth",component:function(){return o.e("about").then(o.bind(null,"acc0"))}},{path:"/about",name:"about",component:function(){return o.e("about").then(o.bind(null,"f820"))}},{path:"/movie/:id",name:"movie",component:F},{path:"/search",name:"search",component:function(){return o.e("about").then(o.bind(null,"2d3b"))}}]}),D=o("ade3"),W=(o("7f7f"),o("3835")),H=o("2f62"),q=o("8aa5"),J=o.n(q),K=o("bc3a"),X=o.n(K);n["a"].use(H["a"]);var Z=new H["a"].Store({state:{user:null,loading:!1,error:null,photoURL:null,progress:null,progressShow:!1,movies:null,searchValue:null,myMovies:null},getters:{user:function(e){return e.user},movies:function(e){return e.movies},loading:function(e){return e.loading},error:function(e){return e.error},photoURL:function(e){return e.photoURL},progress:function(e){return e.progress},searchValue:function(e){return e.searchValue},setMyMovies:function(e){return e.myMovies}},mutations:{setUser:function(e,t){e.user=t},setLoading:function(e,t){e.loading=t},setMovies:function(e,t){e.movies=t},setMyMovies:function(e,t){e.myMovies=t},setError:function(e,t){e.error=t},clearError:function(e){e.error=null},setURLPhoto:function(e,t){e.photoURL=t},setProgress:function(e,t){e.progress=t},setProgressShow:function(e,t){e.progressShow=t},setSearchValue:function(e,t){e.searchValue=t}},actions:{signUserUp:function(e,t){var o=e.commit;o("setLoading",!0),o("clearError"),J.a.auth().createUserWithEmailAndPassword(t.email,t.password).then(function(e){J.a.auth().currentUser.updateProfile({displayName:t.displayName}).then(function(){console.log("successful"),window.location.reload()});var n={id:e.uid,email:e.email};o("setUser",n)}).catch(function(e){o("setLoading",!1),o("setError",e),console.log(e)}),o("setLoading",!1)},signUserIn:function(e,t){var o=e.commit;o("setLoading",!0),o("clearError"),J.a.auth().signInWithEmailAndPassword(t.email,t.password).then(function(e){o("setLoading",!1);var t={id:e.uid,name:e.displayName,email:e.email};o("setUser",t),window.location.reload()}).catch(function(e){o("setLoading",!1),o("setError",e),console.log(e)})},signUserInGoogle:function(e){var t=e.commit;t("setLoading",!0),t("clearError"),J.a.auth().signInWithPopup(new J.a.auth.GoogleAuthProvider).then(function(e){t("setLoading",!1);var o={id:e.uid,name:e.displayName,email:e.email};t("setUser",o)}).catch(function(e){t("setLoading",!1),t("setError",e),console.log(e)})},autoSignIn:function(e,t){var o=e.commit;o("setLoading",!0),o("setUser",{id:t.uid,name:t.displayName,email:t.email,photoURL:t.photoURL}),o("setLoading",!1)},logout:function(e){J.a.auth().signOut(),e.commit("setUser",null),window.location.reload()},updateProfile:function(e,t){var o=e.commit,n=e.state;o("setLoading",!0),J.a.auth().currentUser&&(null!==t.photoURL&&void 0!==t.photoURL?this.dispatch("uploadFileFirebase",[t,n.user.id,"Avatar"]):J.a.auth().currentUser.updateProfile({displayName:t.displayName}).then(function(){console.log("successful"),window.location.reload()}).catch(function(e){o("setLoading",!1),o("setError",e),console.log(e)})),o("setLoading",!1)},resetPasswordWithEmail:function(e,t){var o=e.commit,n=t.email;o("setLoading",!0),J.a.auth().sendPasswordResetEmail(n).then(function(){o("setLoading",!1),console.log("Email Sent")}).catch(function(e){o("setLoading",!1),o("setError",e),console.log(e)})},uploadFileFirebase:function(e,t){var o=e.commit,n=e.state,r=Object(W["a"])(t,3),a=r[0],i=r[1],s=r[2],c=J.a.storage().ref(),u={contentType:"image/jpeg/png"},l=c.child(i+"/"+s),m=l.put(a.photoURL,u);return m.on("state_changed",function(e){var t=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload is "+t+"% done"),o("setProgress",t),o("setProgressShow",!0),e.state){case J.a.storage.TaskState.PAUSED:console.log("Upload is paused");break;case J.a.storage.TaskState.RUNNING:console.log("Upload is running");break}}),m.then(function(){return l.getDownloadURL().then(function(e){return console.log("File available at",e),o("setURLPhoto",e),J.a.auth().currentUser.updateProfile({photoURL:e,displayName:n.user.name}).then(function(){console.log("successful"),o("setProgressShow",!1),window.location.reload()}).catch(function(e){o("setLoading",!1),o("setError",e),o("setProgressShow",!1),console.log(e)})})})},getMovies:function(e,t){var o=e.commit;return o("setLoading",!0),X.a.get("http://api.tvmaze.com/"+t).then(function(e){console.log(e),o("setMovies",e.data),o("setLoading",!1)}).catch(function(e){console.log(e),o("setError",e)})},addMyMovies:function(e,t){e.commit;var o=e.state,n=J.a.firestore().collection(o.user.id).doc("myMovie");n.get().then(function(e){e.exists?n.update(Object(D["a"])({},t.id,t)).then(function(){console.log("update!")}).catch(function(e){console.error("Error writing document: ",e)}):n.set(Object(D["a"])({},t.id,t)).then(function(){console.log("Document successfully written!")}).catch(function(e){console.error("Error writing document: ",e)})}).catch(function(e){console.log("Error getting document",e)})},getMyMovies:function(e){var t=e.commit,o=e.state;return t("setLoading",!0),J.a.firestore().collection(o.user.id).doc("myMovie").get().then(function(e){e.exists?(t("setMyMovies",e.data()),t("setLoading",!1)):(console.log("No such document!"),t("setLoading",!1))}).catch(function(e){console.log("Error getting document:",e)})},deleteMyMovies:function(e,t){e.commit;var o=e.state,n=J.a.firestore().collection(o.user.id).doc("myMovie");n.update(Object(D["a"])({},t,J.a.firestore.FieldValue.delete()))}}}),Q=(o("e71f"),{apiKey:"AIzaSyBn2nxRkorKZ1-a7GWUczlo9bE_LXnyeG0",authDomain:"social-network-movie.firebaseapp.com",databaseURL:"https://social-network-movie.firebaseio.com",projectId:"social-network-movie",storageBucket:"social-network-movie.appspot.com",messagingSenderId:"511734310402"});q["initializeApp"](Q);var Y=q["firestore"](),ee=q["auth"](),te=ee.currentUser,oe={timestampsInSnapshots:!0};Y.settings(oe);var ne,re=Y.collection("users"),ae=q["storage"]().ref(),ie={db:Y,auth:ee,currentUser:te,usersCollection:re,storageRef:ae},se=o("9f7b");o("2dd8");n["a"].use(se["a"]),n["a"].config.productionTip=!1,ie.auth.onAuthStateChanged(function(e){ne||(ne=new n["a"]({el:"#app",router:G,store:Z,created:function(){e&&this.$store.dispatch("autoSignIn",e)},render:function(e){return e(M)}}))})},"5c0b":function(e,t,o){"use strict";var n=o("5e27"),r=o.n(n);r.a},"5e27":function(e,t,o){},cf1c:function(e,t,o){e.exports=o.p+"img/loading.25ef2804.gif"}});
//# sourceMappingURL=app.bb120641.js.map